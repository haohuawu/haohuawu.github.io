<!DOCTYPE html><html><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=0"><title>CSS 权重及优先级</title><meta name="description" content="CSS样式应用到元素上的规则可以简述为：先将所有样式按来源、权重排序，然后应用权重高的样式，权重相同的样式根据“就近原则”应用。"><meta property="og:type" content="article"><meta property="og:title" content="CSS 权重及优先级"><meta property="og:url" content="https://haohuawu.github.io/2017/03/28/css-specific-and-priority/index.html"><meta property="og:site_name" content="天枢"><meta property="og:description" content="CSS样式应用到元素上的规则可以简述为：先将所有样式按来源、权重排序，然后应用权重高的样式，权重相同的样式根据“就近原则”应用。"><meta property="og:updated_time" content="2017-05-30T05:55:35.000Z"><meta name="twitter:card" content="summary"><meta name="twitter:title" content="CSS 权重及优先级"><meta name="twitter:description" content="CSS样式应用到元素上的规则可以简述为：先将所有样式按来源、权重排序，然后应用权重高的样式，权重相同的样式根据“就近原则”应用。"><link rel="stylesheet" href="/assets/blog/styles/main.css"></head><body><header class="site--header" role="banner"><div class="wrapper"><a class="site--title" href="/">天枢</a> <a class="nav-menu" href="javascript: void 0;"><svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 32 32"><path fill="#424242" d="M2 6.667h28v3.135h-28v-3.135zM2 17.531v-3.063h28v3.063h-28zM2 25.333v-3.135h28v3.135h-28z"></path></svg></a></div></header><main class="site--content" aria-label="Content"><div class="wrapper"><article id="post-css-specific-and-priority" class="post" data-layout="post" data-site-index="post" itemscope itemprop="blogPost"><!-- title --><h1 class="post-title" itemprop="name">CSS 权重及优先级</h1><!-- meta --><div class="post-meta"><span class="post-date post-meta--item"><span class="icon icon---date"><svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28"><path fill="#828282" d="M14.714 7.049v7.275l6.236 3.703-1.039 1.754-7.275-4.417v-8.315h2.079zM14 25.108c6.106 0 11.108-5.002 11.108-11.108s-5.002-11.108-11.108-11.108-11.108 5.002-11.108 11.108 5.002 11.108 11.108 11.108zM14 0.164c7.665 0 13.836 6.171 13.836 13.836s-6.171 13.836-13.836 13.836-13.836-6.171-13.836-13.836 6.171-13.836 13.836-13.836z"></path></svg> </span><time datetime="2017-03-28T08:17:22.000Z" itemprop="datePublished">2017-03-28</time></span><div class="post-tags post-meta--item"><span class="icon icon---tag"><svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28"><path fill="#828282" d="M26.688 0h-10.5c-0.722 0-1.73 0.418-2.241 0.928l-13.019 13.019c-0.51 0.51-0.51 1.346 0 1.856l11.269 11.269c0.51 0.51 1.346 0.51 1.856 0l13.019-13.019c0.51-0.51 0.928-1.519 0.928-2.241v-10.5c0-0.722-0.591-1.313-1.313-1.313zM20.125 10.5c-1.45 0-2.625-1.175-2.625-2.625s1.175-2.625 2.625-2.625 2.625 1.175 2.625 2.625-1.175 2.625-2.625 2.625z"></path></svg></span><ul class="tag-list"><li class="tag-list--item"><a class="tag-list--link" href="/tags/css/">#CSS</a></li></ul></div></div><!-- gallery --><!-- entry --><main class="post--entry" itemprop="articleBody"><p>CSS样式应用到元素上的规则可以简述为：先将所有样式按来源、权重排序，然后应用权重高的样式，权重相同的样式根据“就近原则”应用。</p><a id="more"></a><h3 id="CSS-权重"><a href="#CSS-权重" class="headerlink" title="CSS 权重"></a>CSS 权重</h3><ul><li><p><code>内联样式(1000)</code></p></li><li><p><code>ID选择器(100)</code></p></li><li><p><code>class、属性、伪类选择器(10)</code></p></li><li><p><code>元素、伪元素(1)</code></p></li><li><p><code>通配符*(0)</code></p></li></ul><figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/* 0001 */</span></div><div class="line"><span class="selector-tag">h1</span> &#123;</div><div class="line">  <span class="attribute">color</span>: red;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">/* 0012 */</span></div><div class="line"><span class="selector-tag">p</span><span class="selector-class">.siderbar</span> &gt; <span class="selector-tag">em</span> &#123;</div><div class="line">  <span class="attribute">color</span>: purple;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">/* 0020 */</span></div><div class="line"><span class="selector-class">.clearfloat</span><span class="selector-pseudo">::after</span> &#123;</div><div class="line">  <span class="attribute">content</span>: <span class="string">""</span>;</div><div class="line">  <span class="attribute">display</span>:block;</div><div class="line">  <span class="attribute">clear</span>:both;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">/* 0101 */</span></div><div class="line"><span class="selector-tag">li</span><span class="selector-id">#answer</span> &#123;</div><div class="line">  <span class="attribute">color</span>:navy;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">/* 0012 */</span></div><div class="line"><span class="selector-tag">ul</span> &gt; <span class="selector-tag">li</span><span class="selector-attr">[id="answer"]</span> &#123;</div><div class="line">  <span class="attribute">color</span>:navy;</div><div class="line">&#125;</div></pre></td></tr></table></figure><p><strong>注意：</strong></p><ul><li><p>使用属性选择器选择ID，其权重为10</p></li><li><p>权重值不会进位，即使有 10 个元素选择器，其权重也不如一个类选择器权重高，即 <code>000(10)</code> &lt; <code>0010</code></p></li><li><p>拥有 <code>!important</code> 声明的样式声明其权重单独计算</p></li><li><p>(默认)继承的样式没有权重，会被通配符样式覆盖</p><figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">* &#123; <span class="attribute">color</span>:yellow; &#125;</div><div class="line"><span class="selector-tag">h1</span> &#123; <span class="attribute">color</span>:red; &#125;</div></pre></td></tr></table></figure><figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>RED and <span class="tag">&lt;<span class="name">em</span>&gt;</span>YELLOW<span class="tag">&lt;/<span class="name">em</span>&gt;</span><span class="tag">&lt;/<span class="name">h1</span>&gt;</span></div></pre></td></tr></table></figure><p><code>em</code> 元素继承了 <code>h1</code> 的 <code>color</code> 样式，但是因为其无权重，所以会被 <code>* { color:yellow; }</code> 覆盖。</p></li></ul><h3 id="CSS-样式应用优先级分析"><a href="#CSS-样式应用优先级分析" class="headerlink" title="CSS 样式应用优先级分析"></a>CSS 样式应用优先级分析</h3><ol><li><p>列出每一条样式规则，每条规则都含有一个匹配给定元素的选择器</p></li><li><p>按照来源和重要声明对所有样式排序</p><p>CSS的来源有三种：</p><ul><li><p>User Agent Stylesheet 用户代理的默认 CSS（浏览器默认的 CSS）</p></li><li><p>Author Stylesheet 开发人员定义的 CSS</p></li><li><p>User Stylesheet 用户自定义的 CSS</p></li></ul></li><li><p>再考虑到重要声明，可以将样式如下排序（优先级从高到低）：</p><ol><li><p>User Stylesheet (!important)</p></li><li><p>Author Stylesheet (!important)</p></li><li><p>Author Stylesheet (Normal)</p></li><li><p>User Stylesheet (Normal)</p></li><li><p>User Agent Stylesheet</p></li></ol></li><li><p>按照选择器权重给所有样式声明排序</p></li><li><p>按照样式声明出现的顺序给其排序，同一权重的，后申明优先级越高，即“就近原则”</p><p>所以，对于推荐下面的链接样式的排序(link-visited-hover-active, LVHA)</p><figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="selector-pseudo">:link</span> &#123; <span class="attribute">color</span>:blue; &#125;</div><div class="line"><span class="selector-pseudo">:visited</span> &#123; <span class="attribute">color</span>:purple; &#125;</div><div class="line"><span class="selector-pseudo">:hover</span> &#123; <span class="attribute">color</span>:red; &#125;</div><div class="line"><span class="selector-pseudo">:active</span> &#123; <span class="attribute">color</span>:orange; &#125;</div></pre></td></tr></table></figure><p>而不是：</p><figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="selector-pseudo">:active</span> &#123; <span class="attribute">color</span>:orange; &#125;</div><div class="line"><span class="selector-pseudo">:hover</span> &#123; <span class="attribute">color</span>:red; &#125;</div><div class="line"><span class="selector-pseudo">:link</span> &#123; <span class="attribute">color</span>:blue; &#125;</div><div class="line"><span class="selector-pseudo">:visited</span> &#123; <span class="attribute">color</span>:purple; &#125;</div></pre></td></tr></table></figure><p>这样任何链接都不会显示 <code>:hover</code> 或 <code>:active</code> 样式。因为任何链接要么已访问，要么未访问，所以前两个样式会被覆盖。</p></li></ol></main><!-- navigation --><nav class="post-nav"><a href="/2017/03/31/mac-setup-nginx-mysql-php-fpm/" class="post-nav--link"><strong class="post-nav--caption">上一篇</strong><div class="post-nav--title">Mac 下搭建 nginx + mysql + php + fpm</div></a><a href="/2017/03/28/talking-about-css-architecture/" class="post-nav--link"><strong class="post-nav--caption">下一篇</strong><div class="post-nav--title">谈谈 CSS 架构</div></a></nav><!-- footer --></article><aside class="side-bar"><div class="side-bar--wrapper"><nav class="post-nav"><a href="/2017/03/31/mac-setup-nginx-mysql-php-fpm/" class="post-nav--link"><strong class="post-nav--caption">上一篇</strong> </a><a href="/2017/03/28/talking-about-css-architecture/" class="post-nav--link"><strong class="post-nav--caption">下一篇</strong></a></nav><!-- toc --><ul class="toc"><li class="toc--item"><a title="CSS 权重" class="toc--item--anchor" href="#CSS-权重" data-depth="0"><span class="toc--number">1</span>CSS 权重</a></li><li class="toc--item"><a title="CSS 样式应用优先级分析" class="toc--item--anchor" href="#CSS-样式应用优先级分析" data-depth="0"><span class="toc--number">2</span>CSS 样式应用优先级分析</a></li></ul></div></aside></div></main><footer class="site--footer"><div class="wrapper"><h2 class="footer--heading">天枢</h2><div class="footer-col-wrapper"><div class="footer-col footer-col---3"><ul class="slash-list"><li>他强由他强，清风拂山岗</li><li><a rel="license" href="http://creativecommons.org/licenses/by-nc-nd/3.0/"><img alt="知识共享许可协议" style="border-width: 0" src="https://i.creativecommons.org/l/by-nc-nd/3.0/80x15.png"></a></li></ul></div></div></div></footer><script src="/assets/blog/js/manifest.js"></script><script src="/assets/blog/js/vendor.js"></script><script src="/assets/blog/js/main.js"></script></body></html>