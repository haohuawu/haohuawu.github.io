

<!DOCTYPE html>
<html>
  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width,initial-scale=1.0,maximum-scale=1.0,user-scalable=0">
  <title>编写可维护的CSS</title>
  <meta name="description" content="HTML、JS、CSS并列为前端的三驾马车，其中HTML已标准化到HTML5，JS随着ES2015/2016的快速普及（Babel、Webpack功不可没）发展迅猛，CSS被远远的抛在了后面，彻底成为大型项目工程化、模块化的痛点、难题。当然，不能说CSS社区毫无进展，SASS、Less、Stylus、PostCSS、Stylelint这些工具的产生确实
命名范式
There are only tw">
<meta property="og:type" content="article">
<meta property="og:title" content="编写可维护的CSS">
<meta property="og:url" content="https://haohuawu.github.io/2017/03/13/writing-maintainable-css/index.html">
<meta property="og:site_name" content="天枢">
<meta property="og:description" content="HTML、JS、CSS并列为前端的三驾马车，其中HTML已标准化到HTML5，JS随着ES2015/2016的快速普及（Babel、Webpack功不可没）发展迅猛，CSS被远远的抛在了后面，彻底成为大型项目工程化、模块化的痛点、难题。当然，不能说CSS社区毫无进展，SASS、Less、Stylus、PostCSS、Stylelint这些工具的产生确实
命名范式
There are only tw">
<meta property="og:updated_time" content="2017-03-25T08:57:01.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="编写可维护的CSS">
<meta name="twitter:description" content="HTML、JS、CSS并列为前端的三驾马车，其中HTML已标准化到HTML5，JS随着ES2015/2016的快速普及（Babel、Webpack功不可没）发展迅猛，CSS被远远的抛在了后面，彻底成为大型项目工程化、模块化的痛点、难题。当然，不能说CSS社区毫无进展，SASS、Less、Stylus、PostCSS、Stylelint这些工具的产生确实
命名范式
There are only tw">
  <link rel="stylesheet" href="/blog/styles/main.css">
</head>
  <body>
    <header class="site--header" role="banner">
  <div class="wrapper">
    <a class="site--title" href="/">天枢</a>
    
    <a class="nav-menu" href="javascript: void 0;"><svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 32 32">
<path fill="#424242" d="M2 6.667h28v3.135h-28v-3.135zM2 17.531v-3.063h28v3.063h-28zM2 25.333v-3.135h28v3.135h-28z"></path>
</svg>
</a>
    
  </div>
</header>

    <main class="site--content" aria-label="Content">
      <div class="wrapper">
        <article
  id="post-writing-maintainable-css"
  class="post"
  data-layout="post"
  data-site-index="post"
  itemscope
  itemprop="blogPost">
  <!-- title -->
  
  
  
<h1 class="post-title" itemprop="name">
  编写可维护的CSS
</h1>
  

  
  <!-- meta -->
  <div class="post-meta">
  
  <span class="post-date post-meta--item">
  <span class="icon icon---date"><svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28">
<path fill="#828282" d="M14.714 7.049v7.275l6.236 3.703-1.039 1.754-7.275-4.417v-8.315h2.079zM14 25.108c6.106 0 11.108-5.002 11.108-11.108s-5.002-11.108-11.108-11.108-11.108 5.002-11.108 11.108 5.002 11.108 11.108 11.108zM14 0.164c7.665 0 13.836 6.171 13.836 13.836s-6.171 13.836-13.836 13.836-13.836-6.171-13.836-13.836 6.171-13.836 13.836-13.836z"></path>
</svg>
</span>
  <time datetime="2017-03-12T16:00:00.000Z" itemprop="datePublished">2017-03-13</time>
</span>
  
  
<div class="post-tags post-meta--item">
  <span class="icon icon---tag"><svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28">
<path fill="#828282" d="M26.688 0h-10.5c-0.722 0-1.73 0.418-2.241 0.928l-13.019 13.019c-0.51 0.51-0.51 1.346 0 1.856l11.269 11.269c0.51 0.51 1.346 0.51 1.856 0l13.019-13.019c0.51-0.51 0.928-1.519 0.928-2.241v-10.5c0-0.722-0.591-1.313-1.313-1.313zM20.125 10.5c-1.45 0-2.625-1.175-2.625-2.625s1.175-2.625 2.625-2.625 2.625 1.175 2.625 2.625-1.175 2.625-2.625 2.625z"></path>
</svg>
</span>
  <ul class="tag-list"><li class="tag-list--item"><a class="tag-list--link" href="/tags/css/">#CSS</a></li></ul>
</div>

  

</div>
  <!-- gallery -->
  
  <!-- entry -->
  <main class="post--entry" itemprop="articleBody">
    <p>HTML、JS、CSS并列为前端的三驾马车，其中HTML已标准化到HTML5，JS随着ES2015/2016的快速普及（Babel、Webpack功不可没）发展迅猛，CSS被远远的抛在了后面，彻底成为大型项目工程化、模块化的痛点、难题。当然，不能说CSS社区毫无进展，SASS、Less、Stylus、PostCSS、Stylelint这些工具的产生确实</p>
<h2 id="命名范式"><a href="#命名范式" class="headerlink" title="命名范式"></a>命名范式</h2><blockquote>
<p>There are only two hard things in Computer Science: cache invalidation and <strong>naming things</strong>.</p>
<p>— Phil Karlton</p>
</blockquote>
<p>良好的命名对于编写可维护的CSS尤为重要。CSS的命名范式主要有：Atomic、<a href="https://github.com/css-modules/css-modules" target="_blank" rel="external">CSS Modules</a>、<a href="http://oocss.org/" target="_blank" rel="external">OOCSS</a>、<a href="https://smacss.com/" target="_blank" rel="external">SMACSS</a>、<a href="http://getbem.com/" target="_blank" rel="external">BEM</a>。</p>
<a id="more"></a>
<h4 id="Atomic"><a href="#Atomic" class="headerlink" title="Atomic"></a>Atomic</h4><p>以非语义化的CSS类名描述元素的基本样式（一组样式的集合、工具类），灵活但不可读（同时意味着难以维护），偏原子化、过于抽象、代码冗余：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"pull-left"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"grid row"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"col-xs-4 black-70"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div></pre></td></tr></table></figure>
<h4 id="CSS-Modules"><a href="#CSS-Modules" class="headerlink" title="CSS Modules"></a>CSS Modules</h4><p>而语义化的CSS类名一般应用于HTML、CSS、JavaScript甚至自动化测试，偏应用化/模块化。语义化的CSS类名易读，少了二义性，HTML结构简单直接，清晰地表达了模块化的设计思想，易于定位，重构风险小（模块化的设计影响范围小）：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"basket"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"tag-cloud"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"auto-complete"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"avatar"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div></pre></td></tr></table></figure>
<p>显然，语义化的CSS类名更易于维护，为了灵活扩展及复用，我们可以通过SASS、LESS或者Stylus等CSS处理器定义、提取原子样式，将其组合为一个个语义化的CSS组件。</p>
<h2 id="抽象与复用"><a href="#抽象与复用" class="headerlink" title="抽象与复用"></a>抽象与复用</h2><p>语义化的CSS不利于复用，对于一些公共的、抽象的样式（垂直居中、网格布局、清除浮动、多行省略、主题样式等等），我们可以通过CSS处理器定义变量、mixin（够用就好、不要太复杂，过于复杂则增加了维护成本，限制了复用）解决。</p>
<h2 id="避免（正确）使用id"><a href="#避免（正确）使用id" class="headerlink" title="避免（正确）使用id"></a>避免（正确）使用id</h2><p>id的权重太大，同时id表示元素唯一，不利于应用样式，除了以下场景，应当避免使用：</p>
<ul>
<li>关联 label 标签</li>
<li>作为 hash URL</li>
<li>关联 aria 属性，增加可访问性</li>
<li>用于BI埋点、自动化测试</li>
</ul>
<h2 id="类BEM的约定范式"><a href="#类BEM的约定范式" class="headerlink" title="类BEM的约定范式"></a>类BEM的约定范式</h2><figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">.&lt;<span class="selector-tag">module</span>&gt;<span class="selector-attr">[--&lt;component&gt;]</span><span class="selector-attr">[attribute for state]</span><span class="selector-attr">[---&lt;modifier&gt;]</span> &#123;&#125;</div></pre></td></tr></table></figure>
<figure class="highlight scss"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">&lt;!-- SASS --&gt;</div><div class="line"><span class="selector-class">.search-result</span> &#123;</div><div class="line">  &amp;--<span class="selector-tag">head</span> &#123;&#125;</div><div class="line">  &amp;<span class="selector-attr">[loading]</span> &#123;&#125;</div><div class="line">  &amp;---bg-sunny &#123;&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="什么是模块"><a href="#什么是模块" class="headerlink" title="什么是模块"></a>什么是模块</h2><p>模块是一个独立的单元，也可以和其他模块组成更复杂的模块，比如：电视、沙发以及衣柜组成卧室，拿掉电视，卧室还是卧室。</p>
<h2 id="什么是组件"><a href="#什么是组件" class="headerlink" title="什么是组件"></a>什么是组件</h2><p>组件是模块不可分割的一部分，当然有时候组件与模块之间的边界比较模糊，比如网站的用户头像与头部导航，用户头像可以是组件，也可以是模块。</p>
<h2 id="状态"><a href="#状态" class="headerlink" title="状态"></a>状态</h2><p>用户界面不是一成不变的，尤其是响应式的、富交互的。随着用户界面与用户产生交互，元素就会有各种状态：</p>
<ul>
<li>显示/隐藏</li>
<li>激活/未激活</li>
<li>禁用/非禁用</li>
<li>加载中/加载完毕</li>
</ul>
<h2 id="修饰符"><a href="#修饰符" class="headerlink" title="修饰符"></a>修饰符</h2><p>修饰符和状态类似，但是一般用于区别各个同类组件/模块实例，比如同样的海报banner，背景图不一样；同样的按钮，主色不一样</p>
<p>参考：</p>
<ul>
<li><a href="http://maintainablecss.com/" target="_blank" rel="external">maintainablecss</a></li>
</ul>

  </main>
  <!-- navigation -->
  
<nav class="post-nav">
  
  <a href="/2017/03/15/setup-fe-server/" class="post-nav--link">
    <strong class="post-nav--caption">上一篇</strong>
    
    <div class="post-nav--title">
      搭建前端开发 Ubuntu 服务器
    </div>
    
  </a>
  
  
  <a href="/2017/03/05/h5-video-player/" class="post-nav--link">
    <strong class="post-nav--caption">下一篇</strong>
    
    <div class="post-nav--title">
      移动端H5视频播放的那些事儿
    </div>
    
  </a>
  
</nav>

  <!-- footer -->
  
</article>
<aside class="side-bar">
  <div class="side-bar--wrapper">
    
<nav class="post-nav">
  
  <a href="/2017/03/15/setup-fe-server/" class="post-nav--link">
    <strong class="post-nav--caption">上一篇</strong>
    
  </a>
  
  
  <a href="/2017/03/05/h5-video-player/" class="post-nav--link">
    <strong class="post-nav--caption">下一篇</strong>
    
  </a>
  
</nav>

    <!-- toc -->
    <ul class="toc"><li class="toc--item"><a title="命名范式" class="toc--item--anchor" href="#命名范式" data-depth="0"><span class="toc--number">1</span>命名范式</a></li><li class="toc--item"><a title="Atomic" class="toc--item--anchor" href="#Atomic" data-depth="1"><span class="toc--number">1.1</span>Atomic</a></li><li class="toc--item"><a title="CSS Modules" class="toc--item--anchor" href="#CSS-Modules" data-depth="1"><span class="toc--number">1.2</span>CSS Modules</a></li><li class="toc--item"><a title="抽象与复用" class="toc--item--anchor" href="#抽象与复用" data-depth="0"><span class="toc--number">2</span>抽象与复用</a></li><li class="toc--item"><a title="避免（正确）使用id" class="toc--item--anchor" href="#避免（正确）使用id" data-depth="0"><span class="toc--number">3</span>避免（正确）使用id</a></li><li class="toc--item"><a title="类BEM的约定范式" class="toc--item--anchor" href="#类BEM的约定范式" data-depth="0"><span class="toc--number">4</span>类BEM的约定范式</a></li><li class="toc--item"><a title="什么是模块" class="toc--item--anchor" href="#什么是模块" data-depth="0"><span class="toc--number">5</span>什么是模块</a></li><li class="toc--item"><a title="什么是组件" class="toc--item--anchor" href="#什么是组件" data-depth="0"><span class="toc--number">6</span>什么是组件</a></li><li class="toc--item"><a title="状态" class="toc--item--anchor" href="#状态" data-depth="0"><span class="toc--number">7</span>状态</a></li><li class="toc--item"><a title="修饰符" class="toc--item--anchor" href="#修饰符" data-depth="0"><span class="toc--number">8</span>修饰符</a></li></ul>
  </div>
</aside>
      </div>
    </main>
    <footer class="site--footer">
  <div class="wrapper">
    <h2 class="footer--heading">天枢</h2>
    <div class="footer-col-wrapper">
    
      <div class="footer-col footer-col---3">
        <ul class="slash-list">
          <li>他强由他强，清风拂山岗</li>
          <li>
            <a rel="license" href="http://creativecommons.org/licenses/by-nc-nd/3.0/">
              <img alt="知识共享许可协议" style="border-width: 0" src="https://i.creativecommons.org/l/by-nc-nd/3.0/80x15.png" />
            </a>
          </li>
        </ul>
      </div>
    </div>
  </div>
</footer>
    <script src="/blog/js/manifest.js"></script>
<script src="/blog/js/vendor.js"></script>
<script src="/blog/js/main.js"></script>
  </body>
</html>
